<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATLAB Grundlagen - Interaktive Visualisierung</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            min-height: 100vh;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header a {
            color: white;
            text-decoration: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .header a:hover {
            opacity: 1;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: -1px;
            flex-wrap: wrap;
        }
        .tab-button {
            padding: 12px 24px 18px 24px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 8px 8px 0 0;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        .tab-button:hover {
            background: rgba(255,255,255,0.3);
        }
        .tab-button.active {
            background: white;
            color: #667eea;
        }
        .tab-button:first-child {
            border-radius: 12px 8px 0 0;
        }
        .content {
            background: white;
            border-radius: 0 12px 12px 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #667eea;
            margin-top: 0;
        }
        .interactive-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .control-group label {
            font-size: 0.9em;
            color: #555;
            font-weight: 600;
        }
        input[type="number"], input[type="text"], select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }
        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }
        button:hover {
            background: #5568d3;
        }
        .matrix-display {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #667eea;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            white-space: pre;
            overflow-x: auto;
        }
        .result-display {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #667eea;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .matrix-grid {
            display: inline-grid;
            gap: 5px;
            margin: 10px 0;
        }
        .matrix-cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            border: 2px solid #667eea;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .matrix-cell:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        .matrix-cell.highlighted {
            background: #ffd700;
            border-color: #ffa500;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .code-block .comment {
            color: #75715e;
        }
        .code-block .string {
            color: #e6db74;
        }
        .code-block .number {
            color: #ae81ff;
        }
        .code-block .keyword {
            color: #f92672;
        }
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .datatype-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .datatype-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            transition: all 0.3s;
        }
        .datatype-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        .datatype-card h3 {
            margin-top: 0;
            color: #667eea;
        }
        .vector-demo {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        .vector-element {
            min-width: 60px;
            height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #667eea;
            color: white;
            border-radius: 6px;
            font-weight: bold;
            transition: all 0.3s;
            cursor: pointer;
        }
        .vector-element:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .vector-element .index {
            font-size: 0.7em;
            opacity: 0.8;
        }
        .vector-element .value {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>MATLAB Grundlagen</h1>
        <p><a href="../index.html">← Zurück zur Übersicht</a></p>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('datentypen')">Datentypen</button>
            <button class="tab-button" onclick="showTab('vektoren')">Vektoren</button>
            <button class="tab-button" onclick="showTab('matrizen')">Matrizen</button>
            <button class="tab-button" onclick="showTab('indizierung')">Indizierung</button>
            <button class="tab-button" onclick="showTab('operationen')">Operationen</button>
            <button class="tab-button" onclick="showTab('funktionen')">Wichtige Funktionen</button>
        </div>

        <div class="content">
            <!-- Datentypen Tab -->
            <div id="datentypen" class="tab-content active">
                <h2>MATLAB Datentypen</h2>
                <p>In MATLAB werden Variablen implizit deklariert, typischerweise als <code>double</code>. Hier sind die wichtigsten Datentypen:</p>

                <div class="datatype-grid">
                    <div class="datatype-card">
                        <h3>double</h3>
                        <p>64-bit Fließkommazahl (Standard)</p>
                        <div class="code-block">a = <span class="number">3.14</span></div>
                        <p><small>Bereich: ±1.79769e308</small></p>
                    </div>

                    <div class="datatype-card">
                        <h3>single</h3>
                        <p>32-bit Fließkommazahl</p>
                        <div class="code-block">b = single(<span class="number">3.14</span>)</div>
                        <p><small>Weniger Speicher, geringere Präzision</small></p>
                    </div>

                    <div class="datatype-card">
                        <h3>int16, int32, int64</h3>
                        <p>Ganzzahlen verschiedener Größe</p>
                        <div class="code-block">c = int16(<span class="number">100</span>)</div>
                        <p><small>int16: -32768 bis 32767</small></p>
                    </div>

                    <div class="datatype-card">
                        <h3>logical</h3>
                        <p>Boolesche Werte</p>
                        <div class="code-block">d = <span class="keyword">true</span>
e = <span class="keyword">false</span></div>
                        <p><small>true (1) oder false (0)</small></p>
                    </div>

                    <div class="datatype-card">
                        <h3>char</h3>
                        <p>Zeichenkette (Array)</p>
                        <div class="code-block">f = <span class="string">'Hello'</span></div>
                        <p><small>Einzelne Zeichen zugreifbar</small></p>
                    </div>

                    <div class="datatype-card">
                        <h3>string</h3>
                        <p>Zeichenkette (Container)</p>
                        <div class="code-block">g = <span class="string">"Hello World"</span></div>
                        <p><small>Moderne String-Darstellung</small></p>
                    </div>
                </div>

                <div class="interactive-section">
                    <h3>Interaktiver Datentyp-Konverter</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Wert:</label>
                            <input type="number" id="typeValue" value="3.14159" step="0.01">
                        </div>
                        <div class="control-group">
                            <label>Zieltyp:</label>
                            <select id="targetType">
                                <option value="double">double</option>
                                <option value="single">single</option>
                                <option value="int16">int16</option>
                                <option value="int32">int32</option>
                                <option value="logical">logical</option>
                            </select>
                        </div>
                        <button onclick="convertType()">Konvertieren</button>
                    </div>
                    <div class="matrix-display" id="typeResult"></div>
                </div>

                <div class="info-box">
                    <strong>Wichtig:</strong> Die Funktion <code>eps</code> zeigt den minimalen numerischen Abstand zwischen 1 und der nächsten Double-Fließkommazahl an (≈2.2e-16). Kleinere Unterschiede werden gerundet.
                </div>
            </div>

            <!-- Vektoren Tab -->
            <div id="vektoren" class="tab-content">
                <h2>Vektoren in MATLAB</h2>
                <p>Vektoren sind eindimensionale Arrays. MATLAB unterscheidet zwischen Zeilen- und Spaltenvektoren.</p>

                <div class="interactive-section">
                    <h3>Vektor-Generator</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Start:</label>
                            <input type="number" id="vecStart" value="1">
                        </div>
                        <div class="control-group">
                            <label>Schritt:</label>
                            <input type="number" id="vecStep" value="1">
                        </div>
                        <div class="control-group">
                            <label>Ende:</label>
                            <input type="number" id="vecEnd" value="10">
                        </div>
                        <div class="control-group">
                            <label>Typ:</label>
                            <select id="vecType">
                                <option value="row">Zeilenvektor</option>
                                <option value="col">Spaltenvektor</option>
                            </select>
                        </div>
                        <button onclick="generateVector()">Generieren</button>
                    </div>
                    <div id="vectorDisplay"></div>
                    <div class="code-block" id="vectorCode"></div>
                </div>

                <div class="info-box">
                    <strong>Syntax:</strong><br>
                    Zeilenvektor: <code>a = [1, 2, 3, 4, 5]</code> oder <code>a = 1:5</code><br>
                    Spaltenvektor: <code>b = [1; 2; 3; 4; 5]</code> oder <code>b = (1:5)'</code><br>
                    Mit Schrittweite: <code>c = 1:2:10</code> → [1, 3, 5, 7, 9]
                </div>
            </div>

            <!-- Matrizen Tab -->
            <div id="matrizen" class="tab-content">
                <h2>Matrizen in MATLAB</h2>
                <p>Matrizen sind zweidimensionale Arrays. Die Hauptidee von MATLAB: <strong>Alles ist eine Matrix!</strong></p>

                <div class="interactive-section">
                    <h3>Matrix-Generator</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Zeilen:</label>
                            <input type="number" id="matRows" value="3" min="1" max="8">
                        </div>
                        <div class="control-group">
                            <label>Spalten:</label>
                            <input type="number" id="matCols" value="3" min="1" max="8">
                        </div>
                        <div class="control-group">
                            <label>Typ:</label>
                            <select id="matType">
                                <option value="ones">ones (Einsen)</option>
                                <option value="zeros">zeros (Nullen)</option>
                                <option value="eye">eye (Identität)</option>
                                <option value="rand">rand (Zufällig 0-1)</option>
                                <option value="randi">randi (Zufällig 1-10)</option>
                            </select>
                        </div>
                        <button onclick="generateMatrix()">Generieren</button>
                    </div>
                    <div id="matrixDisplay"></div>
                    <div class="code-block" id="matrixCode"></div>
                </div>

                <div class="info-box">
                    <strong>Wichtige Matrixfunktionen:</strong><br>
                    <code>ones(m,n)</code> - Matrix aus Einsen<br>
                    <code>zeros(m,n)</code> - Matrix aus Nullen<br>
                    <code>eye(n)</code> - Identitätsmatrix<br>
                    <code>rand(m,n)</code> - Zufallswerte zwischen 0 und 1<br>
                    <code>randi(max,m,n)</code> - Ganzzahlige Zufallswerte
                </div>
            </div>

            <!-- Indizierung Tab -->
            <div id="indizierung" class="tab-content">
                <h2>Indizierung in MATLAB</h2>
                <p>MATLAB verwendet 1-basierte Indizierung. Der Index beginnt bei 1, nicht bei 0!</p>

                <div class="interactive-section">
                    <h3>Interaktive Indizierung</h3>
                    <p>Klicken Sie auf die Matrixelemente, um deren Indizes zu sehen:</p>
                    <div id="indexMatrixDisplay"></div>
                    <div class="matrix-display" id="indexInfo">Klicken Sie auf ein Element...</div>
                    <div class="code-block" id="indexCode"></div>
                </div>

                <div class="info-box">
                    <strong>Indizierungsarten:</strong><br>
                    Direkter Zugriff: <code>A(2,3)</code> - Element in Zeile 2, Spalte 3<br>
                    Linearer Index: <code>A(5)</code> - 5. Element (spaltenweise gezählt)<br>
                    Bereichsauswahl: <code>A(1:3, 2)</code> - Zeilen 1-3, Spalte 2<br>
                    Alle Elemente: <code>A(:,2)</code> - Alle Zeilen, Spalte 2<br>
                    Letztes Element: <code>A(end, end)</code>
                </div>
            </div>

            <!-- Operationen Tab -->
            <div id="operationen" class="tab-content">
                <h2>Matrix-Operationen</h2>
                <p>MATLAB unterscheidet zwischen Matrix-Operationen und elementweisen Operationen.</p>

                <div class="interactive-section">
                    <h3>Interaktiver Operations-Rechner</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Operation:</label>
                            <select id="opType">
                                <option value="add">Addition (+)</option>
                                <option value="sub">Subtraktion (-)</option>
                                <option value="mult">Matrix-Multiplikation (*)</option>
                                <option value="elemMult">Elementweise Multiplikation (.*)</option>
                                <option value="transpose">Transponieren (')</option>
                                <option value="inv">Inverse</option>
                            </select>
                        </div>
                        <button onclick="performOperation()">Berechnen</button>
                    </div>
                    <div id="operationDisplay"></div>
                </div>

                <div class="info-box">
                    <strong>Wichtiger Unterschied:</strong><br>
                    <code>A * B</code> - Matrix-Multiplikation (Zeilen × Spalten)<br>
                    <code>A .* B</code> - Elementweise Multiplikation<br>
                    <code>A ^ 2</code> - Matrix-Potenz (A * A)<br>
                    <code>A .^ 2</code> - Jedes Element quadriert
                </div>
            </div>

            <!-- Wichtige Funktionen Tab -->
            <div id="funktionen" class="tab-content">
                <h2>Wichtige MATLAB-Funktionen</h2>
                <p>Essenzielle Funktionen für die Arbeit mit Arrays und Daten in MATLAB.</p>

                <h3>sum() - Summe berechnen</h3>
                <div class="interactive-section">
                    <p>Berechnet die Summe von Elementen in einem Array.</p>
                    <div class="controls">
                        <div class="control-group">
                            <label>Array (kommagetrennt):</label>
                            <input type="text" id="sumArray" value="1, 2, 3, 4, 5" style="min-width: 200px;">
                        </div>
                        <button onclick="demonstrateSum()">Berechnen</button>
                    </div>
                    <div class="result-display" id="sumResult"></div>
                    <div class="code-block">v = [1, 2, 3, 4, 5];
sum(v)          <span class="comment">% Summe aller Elemente: 15</span>
sum(v > 2)      <span class="comment">% Anzahl Elemente > 2: 3</span>
sum(v(v > 2))   <span class="comment">% Summe der Elemente > 2: 12</span></div>
                </div>

                <h3>find() - Indizes finden</h3>
                <div class="interactive-section">
                    <p>Findet Indizes von Elementen, die eine Bedingung erfüllen.</p>
                    <div class="controls">
                        <div class="control-group">
                            <label>Array:</label>
                            <input type="text" id="findArray" value="5, 2, 8, 1, 9, 3" style="min-width: 200px;">
                        </div>
                        <div class="control-group">
                            <label>Bedingung:</label>
                            <select id="findCondition">
                                <option value=">5">> 5</option>
                                <option value="<5">< 5</option>
                                <option value="==5">== 5</option>
                                <option value=">=5">>=  5</option>
                            </select>
                        </div>
                        <button onclick="demonstrateFind()">Finden</button>
                    </div>
                    <div class="result-display" id="findResult"></div>
                    <div class="code-block">v = [5, 2, 8, 1, 9, 3];
idx = find(v > 5)    <span class="comment">% Indizes: [3, 5]</span>
v(idx)               <span class="comment">% Werte: [8, 9]</span></div>
                </div>

                <h3>linspace() - Gleichmäßig verteilte Werte</h3>
                <div class="interactive-section">
                    <p>Erstellt einen Vektor mit gleichmäßig verteilten Werten zwischen Start und Ende.</p>
                    <div class="controls">
                        <div class="control-group">
                            <label>Start:</label>
                            <input type="number" id="linStart" value="0" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Ende:</label>
                            <input type="number" id="linEnd" value="10" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Anzahl Punkte:</label>
                            <input type="number" id="linPoints" value="11" min="2">
                        </div>
                        <button onclick="demonstrateLinspace()">Generieren</button>
                    </div>
                    <div id="linspaceDisplay"></div>
                    <div class="code-block" id="linspaceCode"></div>
                </div>

                <h3>randi() - Zufällige Ganzzahlen</h3>
                <div class="interactive-section">
                    <p>Generiert zufällige Ganzzahlen in einem bestimmten Bereich.</p>
                    <div class="controls">
                        <div class="control-group">
                            <label>Maximum:</label>
                            <input type="number" id="randiMax" value="10" min="1">
                        </div>
                        <div class="control-group">
                            <label>Zeilen:</label>
                            <input type="number" id="randiRows" value="1" min="1" max="5">
                        </div>
                        <div class="control-group">
                            <label>Spalten:</label>
                            <input type="number" id="randiCols" value="10" min="1" max="10">
                        </div>
                        <button onclick="demonstrateRandi()">Generieren</button>
                    </div>
                    <div id="randiDisplay"></div>
                    <div class="code-block">A = randi(10, 1, 5)  <span class="comment">% Zufällige Zahlen 1-10</span>
B = randi([5,15], 2, 3)  <span class="comment">% Zahlen zwischen 5 und 15</span></div>
                </div>

                <h3>NaN - Not a Number</h3>
                <div class="interactive-section">
                    <p><code>NaN</code> repräsentiert fehlende oder undefinierte Werte.</p>
                    <div class="code-block">v = [1, 2, NaN, 4, NaN, 6];

<span class="comment">% Prüfen auf NaN</span>
isnan(v)         <span class="comment">% [false, false, true, false, true, false]</span>

<span class="comment">% NaN entfernen</span>
v_clean = v(~isnan(v))  <span class="comment">% [1, 2, 4, 6]</span>

<span class="comment">% Mit NaN rechnen</span>
sum(v)           <span class="comment">% NaN (ein NaN macht alles zu NaN!)</span>
sum(v, 'omitnan') <span class="comment">% 13 (ignoriert NaN)</span>
mean(v, 'omitnan') <span class="comment">% 3.25</span></div>

                    <div class="controls">
                        <div class="control-group">
                            <label>Array mit NaN (z.B. 1,2,NaN,4):</label>
                            <input type="text" id="nanArray" value="1, 2, NaN, 4, NaN, 6" style="min-width: 250px;">
                        </div>
                        <button onclick="demonstrateNaN()">Auswerten</button>
                    </div>
                    <div class="result-display" id="nanResult"></div>
                </div>

                <h3>histcounts() - Histogramm-Daten</h3>
                <div class="interactive-section">
                    <p>Zählt Elemente in definierten Intervallen (Bins).</p>
                    <div class="controls">
                        <div class="control-group">
                            <label>Anzahl Datenpunkte:</label>
                            <input type="number" id="histN" value="100" min="10" max="1000">
                        </div>
                        <div class="control-group">
                            <label>Anzahl Bins:</label>
                            <input type="number" id="histBins" value="10" min="3" max="20">
                        </div>
                        <button onclick="demonstrateHistcounts()">Generieren</button>
                    </div>
                    <div id="histDisplay" style="height: 300px; margin: 20px 0;"></div>
                    <div class="code-block" id="histCode"></div>
                </div>

                <div class="info-box">
                    <strong>Weitere wichtige Funktionen:</strong><br>
                    <code>length(v)</code> - Anzahl Elemente<br>
                    <code>size(A)</code> - Dimensionen einer Matrix<br>
                    <code>numel(A)</code> - Gesamtanzahl Elemente<br>
                    <code>unique(v)</code> - Eindeutige Werte<br>
                    <code>sort(v)</code> - Sortieren<br>
                    <code>max(v)</code>, <code>min(v)</code> - Maximum/Minimum<br>
                    <code>mean(v)</code>, <code>median(v)</code>, <code>std(v)</code> - Statistik
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');

            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function convertType() {
            const value = parseFloat(document.getElementById('typeValue').value);
            const type = document.getElementById('targetType').value;
            let result;

            switch(type) {
                case 'double':
                    result = value;
                    break;
                case 'single':
                    result = Math.fround(value);
                    break;
                case 'int16':
                    result = Math.max(-32768, Math.min(32767, Math.round(value)));
                    break;
                case 'int32':
                    result = Math.round(value);
                    break;
                case 'logical':
                    result = value !== 0;
                    break;
            }

            document.getElementById('typeResult').innerHTML =
                `Original (double): ${value}\n` +
                `Konvertiert (${type}): ${result}\n` +
                `MATLAB Code: ${type}(${value})`;
        }

        function generateVector() {
            const start = parseInt(document.getElementById('vecStart').value);
            const step = parseInt(document.getElementById('vecStep').value);
            const end = parseInt(document.getElementById('vecEnd').value);
            const type = document.getElementById('vecType').value;

            const values = [];
            for(let i = start; i <= end; i += step) {
                values.push(i);
            }

            const display = document.getElementById('vectorDisplay');
            if(type === 'row') {
                display.innerHTML = '<div class="vector-demo">' +
                    values.map((v, i) => `
                        <div class="vector-element">
                            <div class="index">${i+1}</div>
                            <div class="value">${v}</div>
                        </div>
                    `).join('') + '</div>';
                document.getElementById('vectorCode').textContent =
                    `a = ${start}:${step}:${end}\na = [${values.join(', ')}]`;
            } else {
                display.innerHTML = '<div class="vector-demo" style="flex-direction: column;">' +
                    values.map((v, i) => `
                        <div class="vector-element">
                            <div class="index">${i+1}</div>
                            <div class="value">${v}</div>
                        </div>
                    `).join('') + '</div>';
                document.getElementById('vectorCode').textContent =
                    `b = (${start}:${step}:${end})'\nb = [${values.join('; ')}]`;
            }
        }

        let currentMatrix = [];

        function generateMatrix() {
            const rows = parseInt(document.getElementById('matRows').value);
            const cols = parseInt(document.getElementById('matCols').value);
            const type = document.getElementById('matType').value;

            currentMatrix = [];
            for(let i = 0; i < rows; i++) {
                currentMatrix[i] = [];
                for(let j = 0; j < cols; j++) {
                    switch(type) {
                        case 'ones':
                            currentMatrix[i][j] = 1;
                            break;
                        case 'zeros':
                            currentMatrix[i][j] = 0;
                            break;
                        case 'eye':
                            currentMatrix[i][j] = (i === j) ? 1 : 0;
                            break;
                        case 'rand':
                            currentMatrix[i][j] = Math.random().toFixed(2);
                            break;
                        case 'randi':
                            currentMatrix[i][j] = Math.floor(Math.random() * 10) + 1;
                            break;
                    }
                }
            }

            displayMatrix(currentMatrix, 'matrixDisplay');
            document.getElementById('matrixCode').textContent =
                `A = ${type}(${rows}${cols !== rows ? ', ' + cols : ''})`;
        }

        function displayMatrix(matrix, elementId) {
            const rows = matrix.length;
            const cols = matrix[0].length;

            let html = `<div class="matrix-grid" style="grid-template-columns: repeat(${cols}, 50px);">`;
            for(let i = 0; i < rows; i++) {
                for(let j = 0; j < cols; j++) {
                    html += `<div class="matrix-cell" data-row="${i}" data-col="${j}" onclick="highlightCell(${i}, ${j})">${matrix[i][j]}</div>`;
                }
            }
            html += '</div>';
            document.getElementById(elementId).innerHTML = html;
        }

        function highlightCell(row, col) {
            const cells = document.querySelectorAll('.matrix-cell');
            cells.forEach(cell => cell.classList.remove('highlighted'));

            const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
            cell.classList.add('highlighted');

            const linearIndex = col * currentMatrix.length + row + 1;

            document.getElementById('indexInfo').innerHTML =
                `Element: ${currentMatrix[row][col]}\n` +
                `Position: Zeile ${row+1}, Spalte ${col+1}\n` +
                `Direkter Index: A(${row+1}, ${col+1})\n` +
                `Linearer Index: A(${linearIndex})`;

            document.getElementById('indexCode').textContent =
                `A(${row+1}, ${col+1})  % Direkter Zugriff\n` +
                `A(${linearIndex})      % Linearer Index`;
        }

        function performOperation() {
            const op = document.getElementById('opType').value;
            const A = [[2, 1], [3, 4]];
            const B = [[1, 2], [3, 1]];
            let result = [];
            let code = '';

            switch(op) {
                case 'add':
                    result = [[A[0][0]+B[0][0], A[0][1]+B[0][1]], [A[1][0]+B[1][0], A[1][1]+B[1][1]]];
                    code = 'C = A + B';
                    break;
                case 'sub':
                    result = [[A[0][0]-B[0][0], A[0][1]-B[0][1]], [A[1][0]-B[1][0], A[1][1]-B[1][1]]];
                    code = 'C = A - B';
                    break;
                case 'mult':
                    result = [
                        [A[0][0]*B[0][0]+A[0][1]*B[1][0], A[0][0]*B[0][1]+A[0][1]*B[1][1]],
                        [A[1][0]*B[0][0]+A[1][1]*B[1][0], A[1][0]*B[0][1]+A[1][1]*B[1][1]]
                    ];
                    code = 'C = A * B  % Matrix-Multiplikation';
                    break;
                case 'elemMult':
                    result = [[A[0][0]*B[0][0], A[0][1]*B[0][1]], [A[1][0]*B[1][0], A[1][1]*B[1][1]]];
                    code = 'C = A .* B  % Elementweise';
                    break;
                case 'transpose':
                    result = [[A[0][0], A[1][0]], [A[0][1], A[1][1]]];
                    code = "C = A'  % Transponieren";
                    break;
                case 'inv':
                    const det = A[0][0]*A[1][1] - A[0][1]*A[1][0];
                    result = [[A[1][1]/det, -A[0][1]/det], [-A[1][0]/det, A[0][0]/det]];
                    result = result.map(row => row.map(v => v.toFixed(2)));
                    code = 'C = inv(A)  % Inverse';
                    break;
            }

            let html = '<div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap;">';
            html += '<div><strong>Matrix A:</strong>';
            html += `<div class="matrix-grid" style="grid-template-columns: repeat(2, 50px);">`;
            A.forEach(row => row.forEach(v => html += `<div class="matrix-cell">${v}</div>`));
            html += '</div></div>';

            if(op !== 'transpose' && op !== 'inv') {
                html += '<div><strong>Matrix B:</strong>';
                html += `<div class="matrix-grid" style="grid-template-columns: repeat(2, 50px);">`;
                B.forEach(row => row.forEach(v => html += `<div class="matrix-cell">${v}</div>`));
                html += '</div></div>';
            }

            html += '<div><strong>Ergebnis:</strong>';
            html += `<div class="matrix-grid" style="grid-template-columns: repeat(2, 50px);">`;
            result.forEach(row => row.forEach(v => html += `<div class="matrix-cell" style="background: #1abc9c; color: white;">${v}</div>`));
            html += '</div></div>';
            html += '</div>';

            html += `<div class="code-block" style="margin-top: 15px;">${code}</div>`;
            document.getElementById('operationDisplay').innerHTML = html;
        }

        // Wichtige Funktionen - Demos
        function demonstrateSum() {
            const input = document.getElementById('sumArray').value;
            const arr = input.split(',').map(v => parseFloat(v.trim()));

            const total = arr.reduce((sum, v) => sum + v, 0);
            const countGreater2 = arr.filter(v => v > 2).length;
            const sumGreater2 = arr.filter(v => v > 2).reduce((sum, v) => sum + v, 0);

            document.getElementById('sumResult').textContent =
                `Array: [${arr.join(', ')}]\n\n` +
                `sum(v) = ${total}\n` +
                `sum(v > 2) = ${countGreater2}  (Anzahl Elemente > 2)\n` +
                `sum(v(v > 2)) = ${sumGreater2}  (Summe der Elemente > 2)`;
        }

        function demonstrateFind() {
            const input = document.getElementById('findArray').value;
            const condition = document.getElementById('findCondition').value;
            const arr = input.split(',').map(v => parseFloat(v.trim()));

            let indices = [];
            let values = [];

            arr.forEach((v, i) => {
                let match = false;
                if (condition === '>5') match = v > 5;
                else if (condition === '<5') match = v < 5;
                else if (condition === '==5') match = v === 5;
                else if (condition === '>=5') match = v >= 5;

                if (match) {
                    indices.push(i + 1); // MATLAB ist 1-basiert
                    values.push(v);
                }
            });

            document.getElementById('findResult').textContent =
                `Array: [${arr.join(', ')}]\n` +
                `Bedingung: v ${condition}\n\n` +
                `idx = find(v ${condition})\n` +
                `idx = [${indices.join(', ')}]\n\n` +
                `Werte: v(idx) = [${values.join(', ')}]`;
        }

        function demonstrateLinspace() {
            const start = parseFloat(document.getElementById('linStart').value);
            const end = parseFloat(document.getElementById('linEnd').value);
            const points = parseInt(document.getElementById('linPoints').value);

            const step = (end - start) / (points - 1);
            const values = [];
            for (let i = 0; i < points; i++) {
                values.push((start + i * step).toFixed(2));
            }

            document.getElementById('linspaceDisplay').innerHTML =
                '<div class="vector-demo">' +
                values.map((v, i) => `
                    <div class="vector-element">
                        <div class="index">${i+1}</div>
                        <div class="value">${v}</div>
                    </div>
                `).join('') + '</div>';

            document.getElementById('linspaceCode').textContent =
                `x = linspace(${start}, ${end}, ${points})\n` +
                `x = [${values.join(', ')}]`;
        }

        function demonstrateRandi() {
            const max = parseInt(document.getElementById('randiMax').value);
            const rows = parseInt(document.getElementById('randiRows').value);
            const cols = parseInt(document.getElementById('randiCols').value);

            const matrix = [];
            for (let i = 0; i < rows; i++) {
                matrix[i] = [];
                for (let j = 0; j < cols; j++) {
                    matrix[i][j] = Math.floor(Math.random() * max) + 1;
                }
            }

            let html = `<div class="matrix-grid" style="grid-template-columns: repeat(${cols}, 50px);">`;
            matrix.forEach(row => {
                row.forEach(v => {
                    html += `<div class="matrix-cell">${v}</div>`;
                });
            });
            html += '</div>';

            document.getElementById('randiDisplay').innerHTML = html;
        }

        function demonstrateNaN() {
            const input = document.getElementById('nanArray').value;
            const arr = input.split(',').map(v => {
                const trimmed = v.trim();
                return trimmed.toLowerCase() === 'nan' ? NaN : parseFloat(trimmed);
            });

            const nanIndices = arr.map((v, i) => isNaN(v) ? i + 1 : null).filter(v => v !== null);
            const cleanArr = arr.filter(v => !isNaN(v));
            const sumAll = arr.reduce((sum, v) => sum + v, 0);
            const sumClean = cleanArr.reduce((sum, v) => sum + v, 0);
            const meanClean = sumClean / cleanArr.length;

            document.getElementById('nanResult').textContent =
                `Array: [${arr.map(v => isNaN(v) ? 'NaN' : v).join(', ')}]\n\n` +
                `isnan(v): NaN an Position(en) ${nanIndices.join(', ')}\n\n` +
                `v(~isnan(v)) = [${cleanArr.join(', ')}]  (NaN entfernt)\n\n` +
                `sum(v) = ${isNaN(sumAll) ? 'NaN' : sumAll}\n` +
                `sum(v, 'omitnan') = ${sumClean}\n` +
                `mean(v, 'omitnan') = ${meanClean.toFixed(2)}`;
        }

        function demonstrateHistcounts() {
            const n = parseInt(document.getElementById('histN').value);
            const numBins = parseInt(document.getElementById('histBins').value);

            // Generiere Zufallsdaten (normalverteilt simuliert)
            const data = [];
            for (let i = 0; i < n; i++) {
                // Box-Muller Transform für Normalverteilung
                const u1 = Math.random();
                const u2 = Math.random();
                const z = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
                data.push(z * 2 + 5); // μ=5, σ=2
            }

            const min = Math.min(...data);
            const max = Math.max(...data);
            const binWidth = (max - min) / numBins;

            const bins = Array(numBins).fill(0);
            const edges = [];
            for (let i = 0; i <= numBins; i++) {
                edges.push(min + i * binWidth);
            }

            data.forEach(v => {
                for (let i = 0; i < numBins; i++) {
                    if (v >= edges[i] && (v < edges[i + 1] || i === numBins - 1)) {
                        bins[i]++;
                        break;
                    }
                }
            });

            // Einfaches ASCII-Histogramm
            const maxCount = Math.max(...bins);
            let html = '<div style="font-family: \'Courier New\', monospace; background: white; padding: 15px; border-radius: 6px;">';
            bins.forEach((count, i) => {
                const barLength = Math.round((count / maxCount) * 40);
                const bar = '█'.repeat(barLength);
                html += `<div>[${edges[i].toFixed(1)}-${edges[i+1].toFixed(1)}): ${bar} ${count}</div>`;
            });
            html += '</div>';

            document.getElementById('histDisplay').innerHTML = html;
            document.getElementById('histCode').textContent =
                `data = randn(${n}, 1) * 2 + 5;\n` +
                `[counts, edges] = histcounts(data, ${numBins});\n\n` +
                `% Beispiel-Ausgabe:\n` +
                `% counts = [${bins.slice(0, 5).join(', ')}...]\n` +
                `% edges = [${edges.slice(0, 6).map(v => v.toFixed(1)).join(', ')}...]`;
        }

        // Initialisierung
        window.onload = function() {
            convertType();
            generateVector();
            generateMatrix();

            // Initialisiere Indizierungs-Demo
            const demoMatrix = [[1,2,3],[4,5,6],[7,8,9]];
            currentMatrix = demoMatrix;
            displayMatrix(demoMatrix, 'indexMatrixDisplay');
            performOperation();

            // Initialisiere Wichtige Funktionen
            demonstrateSum();
            demonstrateFind();
            demonstrateLinspace();
            demonstrateRandi();
            demonstrateNaN();
            demonstrateHistcounts();
        };
    </script>
</body>
</html>
