<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MATLAB Funktionen - Interaktive Visualisierung</title>
    <style>
        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #c471ed 0%, #9b59b6 100%);
            min-height: 100vh;
        }
        .header {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header a {
            color: #2c3e50;
            text-decoration: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .header a:hover {
            opacity: 1;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: -1px;
            flex-wrap: wrap;
        }
        .tab-button {
            padding: 12px 24px 18px 24px;
            background: rgba(255,255,255,0.5);
            border: none;
            border-radius: 8px 8px 0 0;
            color: #2c3e50;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        .tab-button:hover {
            background: rgba(255,255,255,0.7);
        }
        .tab-button.active {
            background: white;
            color: #9b59b6;
        }
        .tab-button:first-child {
            border-radius: 12px 8px 0 0;
        }
        .content {
            background: white;
            border-radius: 0 12px 12px 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        h2 {
            color: #9b59b6;
            margin-top: 0;
        }
        .interactive-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: flex-end;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .control-group label {
            font-size: 0.9em;
            color: #555;
            font-weight: 600;
        }
        input[type="number"], input[type="text"], select, textarea {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }
        textarea {
            font-family: 'Courier New', monospace;
            min-width: 300px;
            min-height: 60px;
        }
        button {
            padding: 10px 20px;
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
        }
        button:hover {
            background: #8e44ad;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .code-block .comment {
            color: #75715e;
        }
        .code-block .string {
            color: #e6db74;
        }
        .code-block .number {
            color: #ae81ff;
        }
        .code-block .keyword {
            color: #f92672;
        }
        .code-block .function {
            color: #66d9ef;
        }
        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .result-display {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #9b59b6;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .function-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ddd;
            margin: 15px 0;
            transition: all 0.3s;
        }
        .function-card:hover {
            border-color: #9b59b6;
            box-shadow: 0 4px 12px rgba(155, 89, 182, 0.2);
        }
        .function-card h3 {
            margin-top: 0;
            color: #9b59b6;
        }
        .workspace-visual {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .workspace-box {
            flex: 1;
            min-width: 200px;
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #9b59b6;
        }
        .workspace-box h4 {
            margin-top: 0;
            color: #9b59b6;
            text-align: center;
        }
        .variable-list {
            list-style: none;
            padding: 0;
        }
        .variable-list li {
            background: white;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }
        .flow-step {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #9b59b6;
            position: relative;
        }
        .flow-arrow {
            text-align: center;
            font-size: 2em;
            color: #9b59b6;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>MATLAB Funktionen</h1>
        <p><a href="../index.html">← Zurück zur Übersicht</a></p>
    </div>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('uebersicht')">Übersicht</button>
            <button class="tab-button" onclick="showTab('anonym')">Anonyme Funktionen</button>
            <button class="tab-button" onclick="showTab('standard')">Standard-Funktionen</button>
            <button class="tab-button" onclick="showTab('workspace')">Workspaces</button>
            <button class="tab-button" onclick="showTab('argumente')">Argumente</button>
        </div>

        <div class="content">
            <!-- Übersicht Tab -->
            <div id="uebersicht" class="tab-content active">
                <h2>Funktionstypen in MATLAB</h2>
                <p>MATLAB bietet verschiedene Arten von Funktionen für unterschiedliche Anforderungen:</p>

                <div class="function-card">
                    <h3>1. Anonyme Funktionen</h3>
                    <p>Einfache, einzeilige Funktionen ohne eigene Datei</p>
                    <div class="code-block">sqr = @(x) x.^2;
result = sqr(5);  <span class="comment">% Ergebnis: 25</span></div>
                    <strong>Verwendung:</strong> Einfache Berechnungen, Funktionsübergabe
                </div>

                <div class="function-card">
                    <h3>2. Lokale Funktionen</h3>
                    <p>Funktionen am Ende einer Skript- oder Funktionsdatei</p>
                    <div class="code-block"><span class="comment">% Hauptskript</span>
result = myFunction(10);

<span class="keyword">function</span> y = myFunction(x)
    y = x * 2;
<span class="keyword">end</span></div>
                    <strong>Verwendung:</strong> Hilfsfunktionen für das Hauptskript
                </div>

                <div class="function-card">
                    <h3>3. Separate Funktionsdateien</h3>
                    <p>Funktionen in eigenen .m Dateien (gebräuchlichste Form)</p>
                    <div class="code-block"><span class="comment">% Datei: calculateSum.m</span>
<span class="keyword">function</span> [sum, avg] = calculateSum(a, b)
    sum = a + b;
    avg = sum / 2;
<span class="keyword">end</span></div>
                    <strong>Verwendung:</strong> Wiederverwendbare, komplexe Funktionen
                </div>

                <div class="function-card">
                    <h3>4. Verschachtelte Funktionen (Nested)</h3>
                    <p>Funktionen innerhalb anderer Funktionen mit gemeinsamem Workspace</p>
                    <div class="code-block"><span class="keyword">function</span> result = outerFunction(x)
    y = 10;

    <span class="keyword">function</span> inner()
        y = y + x;  <span class="comment">% Zugriff auf y der äußeren Funktion</span>
    <span class="keyword">end</span>

    inner();
    result = y;
<span class="keyword">end</span></div>
                    <strong>Verwendung:</strong> Zugriff auf Variablen der äußeren Funktion
                </div>
            </div>

            <!-- Anonyme Funktionen Tab -->
            <div id="anonym" class="tab-content">
                <h2>Anonyme Funktionen</h2>
                <p>Anonyme Funktionen sind schnell definierte, einzeilige Funktionen ohne eigene Datei.</p>

                <div class="interactive-section">
                    <h3>Interaktiver Funktions-Evaluator</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Funktionsdefinition:</label>
                            <textarea id="anonFunc">@(x) x.^2 + 2*x - 5</textarea>
                        </div>
                        <div class="control-group">
                            <label>Eingabewert(e):</label>
                            <input type="text" id="anonInput" value="1, 2, 3, 4, 5" placeholder="z.B. 1, 2, 3">
                        </div>
                        <button onclick="evaluateAnonymous()">Evaluieren</button>
                    </div>
                    <div class="result-display" id="anonResult"></div>
                </div>

                <div class="info-box">
                    <strong>Syntax:</strong> <code>funktionshandle = @(parameter) ausdruck</code><br><br>
                    <strong>Beispiele:</strong><br>
                    <code>sqr = @(x) x.^2</code> - Quadratfunktion<br>
                    <code>add = @(a,b) a + b</code> - Addition<br>
                    <code>complex = @(x,y) sqrt(x.^2 + y.^2)</code> - Abstand vom Ursprung
                </div>

                <div class="warning-box">
                    <strong>Einschränkung:</strong> Anonyme Funktionen können nur eine einzige Berechnungszeile enthalten. Für komplexere Logik verwenden Sie Standard-Funktionen.
                </div>

                <h3>Vorteile anonymer Funktionen</h3>
                <ul>
                    <li>Schnelle Definition ohne eigene Datei</li>
                    <li>Ideal für einfache mathematische Operationen</li>
                    <li>Perfekt für Funktionsübergabe (z.B. an <code>fzero</code>, <code>integral</code>)</li>
                    <li>Kompakter Code</li>
                </ul>

                <div class="code-block"><span class="comment">% Verwendung mit numerischen Funktionen</span>
f = @(x) x.^3 - 2*x - 5;
nullstelle = fzero(f, 2);  <span class="comment">% Finde Nullstelle nahe 2</span>

<span class="comment">% Verwendung mit Integration</span>
g = @(x) sin(x).^2;
area = integral(g, 0, pi);  <span class="comment">% Integral von 0 bis π</span></div>
            </div>

            <!-- Standard-Funktionen Tab -->
            <div id="standard" class="tab-content">
                <h2>Standard-Funktionen (Separate Dateien)</h2>
                <p>Standard-Funktionen werden in separaten .m Dateien gespeichert und können multiple Ein- und Ausgaben haben.</p>

                <div class="interactive-section">
                    <h3>Funktionsstruktur</h3>
                    <div class="code-block"><span class="keyword">function</span> [output1, output2, ...] = funktionsname(input1, input2, ...)
    <span class="comment">% FUNKTIONSNAME - Kurzbeschreibung</span>
    <span class="comment">%   Detaillierte Beschreibung der Funktion</span>
    <span class="comment">%</span>
    <span class="comment">%   Syntax:</span>
    <span class="comment">%   output = funktionsname(input)</span>
    <span class="comment">%</span>
    <span class="comment">%   Inputs:</span>
    <span class="comment">%       input1 - Beschreibung</span>
    <span class="comment">%</span>
    <span class="comment">%   Outputs:</span>
    <span class="comment">%       output1 - Beschreibung</span>

    <span class="comment">% Berechnungen</span>
    output1 = input1 * 2;
    output2 = input1 + input2;

<span class="keyword">end</span></div>
                </div>

                <h3>Beispiel: Rechteck-Berechnung</h3>
                <div class="code-block"><span class="keyword">function</span> [area, perimeter] = rectangle(length, width)
    <span class="comment">% RECTANGLE - Berechnet Fläche und Umfang eines Rechtecks</span>
    <span class="comment">%</span>
    <span class="comment">%   Inputs:</span>
    <span class="comment">%       length - Länge des Rechtecks</span>
    <span class="comment">%       width  - Breite des Rechtecks</span>
    <span class="comment">%</span>
    <span class="comment">%   Outputs:</span>
    <span class="comment">%       area      - Fläche (length × width)</span>
    <span class="comment">%       perimeter - Umfang (2 × (length + width))</span>

    area = length * width;
    perimeter = 2 * (length + width);
<span class="keyword">end</span></div>

                <div class="interactive-section">
                    <h3>Interaktive Demonstration</h3>
                    <div class="controls">
                        <div class="control-group">
                            <label>Länge:</label>
                            <input type="number" id="rectLength" value="5" step="0.1">
                        </div>
                        <div class="control-group">
                            <label>Breite:</label>
                            <input type="number" id="rectWidth" value="3" step="0.1">
                        </div>
                        <button onclick="calculateRectangle()">Berechnen</button>
                    </div>
                    <div class="result-display" id="rectResult"></div>
                </div>

                <div class="info-box">
                    <strong>Wichtig:</strong> Der Dateiname muss mit dem Funktionsnamen übereinstimmen!<br>
                    Funktion <code>rectangle</code> → Datei <code>rectangle.m</code>
                </div>
            </div>

            <!-- Workspaces Tab -->
            <div id="workspace" class="tab-content">
                <h2>Workspaces und Variablengültigkeit</h2>
                <p>Jede Funktion hat ihren eigenen Workspace - mit Ausnahme von verschachtelten Funktionen.</p>

                <h3>Lokale Funktionen - Getrennte Workspaces</h3>
                <div class="code-block"><span class="keyword">function</span> main()
    x = 10;  <span class="comment">% Variable im main-Workspace</span>
    result = helper(5);
    <span class="comment">% x ist immer noch 10 (nicht von helper beeinflusst)</span>
<span class="keyword">end</span>

<span class="keyword">function</span> y = helper(a)
    x = 100;  <span class="comment">% Neue Variable im helper-Workspace</span>
    y = x + a;  <span class="comment">% y = 105</span>
<span class="keyword">end</span></div>

                <div class="workspace-visual">
                    <div class="workspace-box">
                        <h4>main() Workspace</h4>
                        <ul class="variable-list">
                            <li>x = 10</li>
                            <li>result = 105</li>
                        </ul>
                    </div>
                    <div class="workspace-box">
                        <h4>helper() Workspace</h4>
                        <ul class="variable-list">
                            <li>a = 5</li>
                            <li>x = 100</li>
                            <li>y = 105</li>
                        </ul>
                    </div>
                </div>

                <h3>Verschachtelte Funktionen - Gemeinsamer Workspace</h3>
                <div class="code-block"><span class="keyword">function</span> result = outer(x)
    y = 10;  <span class="comment">% Variable im äußeren Workspace</span>

    <span class="keyword">function</span> inner()
        y = y + x;  <span class="comment">% Zugriff auf y und x der äußeren Funktion!</span>
    <span class="keyword">end</span>

    inner();
    result = y;  <span class="comment">% y wurde von inner() verändert!</span>
<span class="keyword">end</span></div>

                <div class="flow-diagram">
                    <div class="flow-step">
                        <strong>1. Start outer(5):</strong> x = 5, y = 10
                    </div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-step">
                        <strong>2. Aufruf inner():</strong> Zugriff auf x und y
                    </div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-step">
                        <strong>3. In inner():</strong> y = y + x → y = 10 + 5 = 15
                    </div>
                    <div class="flow-arrow">↓</div>
                    <div class="flow-step">
                        <strong>4. Nach inner():</strong> result = y = 15
                    </div>
                </div>

                <div class="warning-box">
                    <strong>Vorsicht:</strong> Verschachtelte Funktionen können Variablen der äußeren Funktion ändern. Dies kann zu unerwartetem Verhalten führen!
                </div>
            </div>

            <!-- Argumente Tab -->
            <div id="argumente" class="tab-content">
                <h2>Funktionsargumente</h2>
                <p>MATLAB bietet flexible Möglichkeiten zum Umgang mit Funktionsargumenten.</p>

                <h3>nargin und nargout</h3>
                <p><code>nargin</code> gibt die Anzahl der übergebenen Eingabeargumente zurück.<br>
                <code>nargout</code> gibt die Anzahl der angeforderten Ausgabeargumente zurück.</p>

                <div class="code-block"><span class="keyword">function</span> result = flexibleFunction(a, b, c)
    <span class="keyword">if</span> nargin < 3
        c = 0;  <span class="comment">% Standardwert wenn c nicht übergeben wurde</span>
    <span class="keyword">end</span>

    <span class="keyword">if</span> nargin < 2
        <span class="function">error</span>(<span class="string">'Mindestens 2 Argumente erforderlich!'</span>);
    <span class="keyword">end</span>

    result = a + b + c;
<span class="keyword">end</span>

<span class="comment">% Aufrufe:</span>
flexibleFunction(1, 2)     <span class="comment">% OK: result = 3 (c = 0)</span>
flexibleFunction(1, 2, 3)  <span class="comment">% OK: result = 6</span>
flexibleFunction(1)        <span class="comment">% ERROR!</span></div>

                <h3>varargin - Variable Anzahl Eingaben</h3>
                <div class="code-block"><span class="keyword">function</span> sum = addAll(varargin)
    <span class="comment">% Addiert beliebig viele Zahlen</span>
    sum = 0;
    <span class="keyword">for</span> i = 1:length(varargin)
        sum = sum + varargin{i};
    <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment">% Aufrufe:</span>
addAll(1)           <span class="comment">% result = 1</span>
addAll(1, 2, 3)     <span class="comment">% result = 6</span>
addAll(1, 2, 3, 4, 5)  <span class="comment">% result = 15</span></div>

                <h3>varargout - Variable Anzahl Ausgaben</h3>
                <div class="code-block"><span class="keyword">function</span> [varargout] = stats(data)
    <span class="comment">% Berechnet verschiedene Statistiken</span>
    varargout{1} = mean(data);  <span class="comment">% Mittelwert immer</span>

    <span class="keyword">if</span> nargout > 1
        varargout{2} = std(data);  <span class="comment">% Standardabweichung wenn gewünscht</span>
    <span class="keyword">end</span>

    <span class="keyword">if</span> nargout > 2
        varargout{3} = min(data);  <span class="comment">% Minimum wenn gewünscht</span>
        varargout{4} = max(data);  <span class="comment">% Maximum wenn gewünscht</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment">% Aufrufe:</span>
m = stats([1,2,3,4,5]);          <span class="comment">% Nur Mittelwert</span>
[m, s] = stats([1,2,3,4,5]);     <span class="comment">% Mittelwert und Std</span>
[m, s, mn, mx] = stats([1,2,3,4,5]);  <span class="comment">% Alle vier Werte</span></div>

                <div class="interactive-section">
                    <h3>Argumentvalidierung (ab R2019b)</h3>
                    <div class="code-block"><span class="keyword">function</span> result = validatedFunction(x, mode)
    <span class="keyword">arguments</span>
        x (1,:) double {mustBePositive}  <span class="comment">% Zeilenvektor, double, positiv</span>
        mode string {mustBeMember(mode, ["add","multiply"])} = "add"
    <span class="keyword">end</span>

    <span class="keyword">if</span> mode == "add"
        result = sum(x);
    <span class="keyword">else</span>
        result = prod(x);
    <span class="keyword">end</span>
<span class="keyword">end</span></div>
                </div>

                <div class="info-box">
                    <strong>Best Practice:</strong><br>
                    • Verwenden Sie <code>nargin</code> für optionale Parameter<br>
                    • Verwenden Sie <code>varargin</code> für flexible Funktionen<br>
                    • Validieren Sie Eingaben mit <code>arguments</code> Block (moderne MATLAB-Versionen)<br>
                    • Dokumentieren Sie alle Parameter in Kommentaren
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');

            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function evaluateAnonymous() {
            const funcStr = document.getElementById('anonFunc').value;
            const inputStr = document.getElementById('anonInput').value;

            try {
                // Parse Funktion
                const match = funcStr.match(/@\((.*?)\)\s*(.*)/);
                if (!match) {
                    throw new Error('Ungültiges Funktionsformat');
                }

                const param = match[1].trim();
                const expr = match[2].trim();

                // Parse Eingabewerte
                const inputs = inputStr.split(',').map(s => parseFloat(s.trim()));

                // Erstelle JavaScript-Funktion
                const jsExpr = expr
                    .replace(/\^/g, '**')
                    .replace(/\./g, '')
                    .replace(/\*/g, '*');

                const func = new Function(param, `return ${jsExpr}`);

                // Evaluiere für alle Eingaben
                const results = inputs.map(x => {
                    const result = func(x);
                    return `f(${x}) = ${result.toFixed(4)}`;
                });

                document.getElementById('anonResult').innerHTML =
                    `Funktion: ${funcStr}\n\n` +
                    results.join('\n');

            } catch(e) {
                document.getElementById('anonResult').innerHTML =
                    `Fehler: ${e.message}\n\nStellen Sie sicher, dass die Funktion im Format @(x) ausdruck vorliegt.`;
            }
        }

        function calculateRectangle() {
            const length = parseFloat(document.getElementById('rectLength').value);
            const width = parseFloat(document.getElementById('rectWidth').value);

            const area = length * width;
            const perimeter = 2 * (length + width);

            document.getElementById('rectResult').innerHTML =
                `MATLAB Code:\n` +
                `[area, perimeter] = rectangle(${length}, ${width})\n\n` +
                `Ergebnisse:\n` +
                `area = ${area.toFixed(2)}\n` +
                `perimeter = ${perimeter.toFixed(2)}`;
        }

        // Initialisierung
        window.onload = function() {
            evaluateAnonymous();
            calculateRectangle();
        };
    </script>
</body>
</html>
